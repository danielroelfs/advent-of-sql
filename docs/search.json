[
  {
    "objectID": "2024.html#day-1",
    "href": "2024.html#day-1",
    "title": "2024",
    "section": "Day 1",
    "text": "Day 1\nDay 1\n\nWITH latest_list AS (\n    SELECT\n        child_id,\n        MAX(submitted_date) AS latest\n    FROM wish_lists\n    GROUP BY child_id\n),\n\nfav_colors AS (\n    SELECT\n        wl.child_id,\n        wl.wishes::json -&gt;&gt; 'colors' AS color_array\n    FROM wish_lists AS wl\n    INNER JOIN latest_list AS ll ON\n        wl.child_id = ll.child_id\n        AND wl.submitted_date = ll.latest\n),\n\nwishes AS (\n    SELECT\n        wl.child_id,\n        wl.wishes::json -&gt;&gt; 'first_choice' AS primary_wish,\n        wl.wishes::json -&gt;&gt; 'second_choice' AS backup_wish,\n        (wl.wishes::json -&gt; 'colors')::json -&gt;&gt; 0 AS favorite_color,\n        JSON_ARRAY_LENGTH(fc.color_array::json) AS n_colors\n    FROM wish_lists AS wl\n    INNER JOIN fav_colors AS fc\n        ON wl.child_id = fc.child_id\n    INNER JOIN latest_list AS ll ON\n        wl.child_id = ll.child_id\n        AND wl.submitted_date = ll.latest\n),\n\ncomplexity AS (\n    SELECT\n        toy_name,\n        CASE\n            WHEN difficulty_to_make = 1 THEN 'Simple Gift'\n            WHEN difficulty_to_make = 2 THEN 'Moderate Gift'\n            ELSE 'Complex Gift'\n        END AS gift_complexity,\n        CASE\n            WHEN category = 'educational' THEN 'Learning Workshop'\n            WHEN category = 'outdoor' THEN 'Outdoor Workshop'\n            ELSE 'General Workshop'\n        END AS workshop_assignment\n    FROM toy_catalogue\n)\n\nSELECT\n    ch.name,\n    wsh.primary_wish,\n    wsh.backup_wish,\n    wsh.favorite_color,\n    wsh.n_colors,\n    cmplx.gift_complexity,\n    cmplx.workshop_assignment\nFROM children AS ch\nINNER JOIN wishes AS wsh ON ch.child_id = wsh.child_id\nINNER JOIN complexity AS cmplx ON wsh.primary_wish = cmplx.toy_name\nORDER BY ch.name\nLIMIT 5;\n\n\n\n      name            primary_wish             backup_wish favorite_color\n1    Abbie            Barbie dolls Toy musical instruments          Green\n2 Abbigail              Jump ropes          Action figures         Yellow\n3 Abdullah                  Yo-yos                  Yo-yos         Yellow\n4 Abdullah Toy musical instruments            Barbie dolls           Pink\n5 Abelardo              Toy trains             Board games         Yellow\n  n_colors gift_complexity workshop_assignment\n1        5   Moderate Gift    General Workshop\n2        1     Simple Gift    Outdoor Workshop\n3        1     Simple Gift    General Workshop\n4        2    Complex Gift   Learning Workshop\n5        4    Complex Gift    General Workshop\n\n\n0.069 sec elapsed"
  },
  {
    "objectID": "about.html",
    "href": "about.html",
    "title": "About",
    "section": "",
    "text": "Every year many coders flock to the Advent of Code challenges where Eric Wastl and his team set up a set of increasingly complicated challenges as an Advent calendar. These challenges are a very nice opportunity to learn new techniques and challenge your skills.\nThese challenges are often not nicely suited for SQL (unless you really want a tough challenge) so to allow people wanting to participate in a similar challenge as the Advent of Code could participate, for the first time in 2024, in the Advent of SQL challenges. Advent of SQL was initially created by Dan Kent. Read his review from the first iteration here. But due to the heavy workload associated with running a project like this he handed over the project to Aaron Francis, creator of the Database School databaseschool.com which now also hosts the project (link)."
  },
  {
    "objectID": "index.html",
    "href": "index.html",
    "title": "Advent of SQL",
    "section": "",
    "text": "2024 2025"
  },
  {
    "objectID": "2025.html",
    "href": "2025.html",
    "title": "2025",
    "section": "",
    "text": "Day 10\nDay 10\n\nSELECT\n    TRIM(LOWER(raw_wish)) AS wish,\n    COUNT(*) AS count\nFROM wish_list\nGROUP BY wish\nORDER BY count DESC\nLIMIT 20;\n\n\n\n                          wish count\n1             lego city f1 car 32893\n2            barbie dreamhouse 32785\n3                 nerf blaster 32746\n4           lego star wars set 32611\n5        beyblade battle arena 29564\n6    magna-tiles pet playhouse 29529\n7   bluey supermarket play set 26292\n8  lego friends amusement park 25982\n9          pokemon trainer box 25968\n10          duplo building set 23005\n11 mini brands fill the fridge 22965\n12      electric toy train set 22885\n13       toniebox audio player 19529\n14                     scooter 19496\n15                  vr headset 16468\n16               squishmallows 16304\n17          shaved ice machine 16263\n18              drone for kids 13151\n19                coding robot 13025\n20                  headphones 13006\n\n\n0.156 sec elapsed\n\n\n\n\nDay 11\nDay 11\n\nSELECT\n    cat.official_category,\n    SUM(inv.quantity) AS total_usable_snowballs\nFROM snowball_categories AS cat\nLEFT JOIN snowball_inventory AS inv\n    ON\n        cat.official_category = inv.category_name\n        AND inv.quantity &gt;= 0\nGROUP BY cat.official_category\nORDER BY total_usable_snowballs ASC;\n\n\n\n          official_category total_usable_snowballs\n1      arctic blast premium                  19335\n2  everfrost training round                  39612\n3 polar precision microball                 117912\n4       glacier sphere (xl)                 275503\n5       north ridge compact                 991208\n6       frost-flight deluxe                1586029\n\n\n0.088 sec elapsed\n\n\n\n\nDay 12\nDay 12\n\nUPDATE hotline_messages\nSET status = 'approved'\nWHERE\n    1 = 1\n    AND LOWER(transcript) LIKE '%sorry%'\n    AND status IS NULL;\n\nDELETE FROM hotline_messages\nWHERE\n    1 = 1\n    AND tag IN (\n        'penguin prank',\n        'time-loop advisory',\n        'possible dragon',\n        'nonsense alert'\n    )\n    OR LOWER(caller_name) = 'test caller';\n\nSELECT\n    COALESCE(status, 'needs review') AS imputed_status,\n    COUNT(*) AS n_messages\nFROM hotline_messages\nGROUP BY imputed_status;\n\n\n\nUPDATE successfully executed. 68 rows were affected.\n\n\nDELETE successfully executed. 89 rows were affected.\n\n\n  imputed_status n_messages\n1   needs review        501\n2       approved        477\n\n\n0.012 sec elapsed\n\n\n\n\nDay 13\nDay 13\n\nWITH os AS (\n    SELECT\n        volunteer_name,\n        role AS assigned_role,\n        CASE\n            WHEN shift_time LIKE '%10%' THEN '10:00'\n            WHEN shift_time LIKE '%12%' THEN '12:00'\n            WHEN shift_time LIKE '%2%' THEN '14:00'\n        END AS shift_time\n    FROM official_shifts\n),\n\nlms AS (\n    SELECT\n        volunteer_name,\n        CASE\n            WHEN LOWER(assigned_task) LIKE '%stage%' THEN 'stage_setup'\n            WHEN LOWER(assigned_task) LIKE '%cocoa%' THEN 'cocoa_station'\n            WHEN LOWER(assigned_task) LIKE '%parking%' THEN 'parking_support'\n            WHEN LOWER(assigned_task) LIKE '%choir%' THEN 'choir_assistant'\n            WHEN\n                LOWER(assigned_task) LIKE '%handwarmer%'\n                THEN 'handwarmer_handout'\n            WHEN LOWER(assigned_task) LIKE '%snow%' THEN 'snow_shoveling'\n            WHEN LOWER(assigned_task) LIKE '%shovel%' THEN 'snow_shoveling'\n        END AS assigned_task_clean,\n        CASE\n            WHEN LOWER(time_slot) LIKE '%noon%' THEN '12:00'\n            WHEN time_slot LIKE '%10%' THEN '10:00'\n            WHEN time_slot LIKE '%2%' THEN '14:00'\n        END AS time_slot_clean\n    FROM last_minute_signups\n),\n\nmerged_table AS (\n    SELECT\n        COALESCE(lms.volunteer_name, os.volunteer_name) AS volunteer_name,\n        COALESCE(lms.assigned_task_clean, os.assigned_role) AS assigned_role,\n        COALESCE(lms.time_slot_clean, os.shift_time) AS shift_time\n    FROM lms\n    FULL OUTER JOIN os ON lms.volunteer_name = os.volunteer_name\n)\n\nSELECT DISTINCT\n    volunteer_name,\n    assigned_role,\n    shift_time\nFROM merged_table\nORDER BY volunteer_name ASC\nLIMIT 15;\n\n\n\n      volunteer_name      assigned_role shift_time\n1       Aaron Carter    parking_support      14:00\n2         Aaron Diaz    choir_assistant      14:00\n3        Aaron Evans      cocoa_station      14:00\n4      Aaron Francis handwarmer_handout      14:00\n5  Abigail Hernandez        stage_setup      10:00\n6          Adam King        stage_setup      10:00\n7        Adil Foster        stage_setup      14:00\n8        Adil Rahman        stage_setup      14:00\n9         Adrian Cox      cocoa_station      10:00\n10     Aisha Bennett      cocoa_station      12:00\n11        Aisha Khan    choir_assistant      12:00\n12    Aisha Mohammed      cocoa_station      14:00\n13       Alina Popov      cocoa_station      12:00\n14      Alina Powell    parking_support      12:00\n15      Amina Diallo    parking_support      14:00\n\n\n0.003 sec elapsed\n\n\n\n\nDay 14\n\n\nDay 15\n\n\nDay 16\n\n\nDay 17\n\n\nDay 18\n\n\nDay 19\n\n\nDay 20\n\n\nDay 21\n\n\nDay 22\n\n\nDay 23\n\n\nDay 24\n\n\nDay 25"
  }
]