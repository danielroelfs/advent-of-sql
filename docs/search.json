[
  {
    "objectID": "index.html#day-1",
    "href": "index.html#day-1",
    "title": "2024",
    "section": "Day 1",
    "text": "Day 1\nDay 1\n\nWITH latest_list AS (\n    SELECT\n        child_id,\n        MAX(submitted_date) AS latest\n    FROM wish_lists\n    GROUP BY child_id\n),\n\nfav_colors AS (\n    SELECT\n        wl.child_id,\n        wl.wishes::json -&gt;&gt; 'colors' AS color_array\n    FROM wish_lists AS wl\n    INNER JOIN latest_list AS ll ON\n        wl.child_id = ll.child_id\n        AND wl.submitted_date = ll.latest\n),\n\nwishes AS (\n    SELECT\n        wl.child_id,\n        wl.wishes::json -&gt;&gt; 'first_choice' AS primary_wish,\n        wl.wishes::json -&gt;&gt; 'second_choice' AS backup_wish,\n        (wl.wishes::json -&gt; 'colors')::json -&gt;&gt; 0 AS favorite_color,\n        JSON_ARRAY_LENGTH(fc.color_array::json) AS n_colors\n    FROM wish_lists AS wl\n    INNER JOIN fav_colors AS fc\n        ON wl.child_id = fc.child_id\n    INNER JOIN latest_list AS ll ON\n        wl.child_id = ll.child_id\n        AND wl.submitted_date = ll.latest\n),\n\ncomplexity AS (\n    SELECT\n        toy_name,\n        CASE\n            WHEN difficulty_to_make = 1 THEN 'Simple Gift'\n            WHEN difficulty_to_make = 2 THEN 'Moderate Gift'\n            ELSE 'Complex Gift'\n        END AS gift_complexity,\n        CASE\n            WHEN category = 'educational' THEN 'Learning Workshop'\n            WHEN category = 'outdoor' THEN 'Outdoor Workshop'\n            ELSE 'General Workshop'\n        END AS workshop_assignment\n    FROM toy_catalogue\n)\n\nSELECT\n    ch.name,\n    wsh.primary_wish,\n    wsh.backup_wish,\n    wsh.favorite_color,\n    wsh.n_colors,\n    cmplx.gift_complexity,\n    cmplx.workshop_assignment\nFROM children AS ch\nINNER JOIN wishes AS wsh ON ch.child_id = wsh.child_id\nINNER JOIN complexity AS cmplx ON wsh.primary_wish = cmplx.toy_name\nORDER BY ch.name\nLIMIT 5;\n\n\n\n     name            primary_wish     backup_wish favorite_color n_colors\n1 Abagail           Building sets     LEGO blocks           Blue        1\n2   Abbey         Stuffed animals     Teddy bears          White        4\n3   Abbey                  Yo-yos Building blocks           Blue        5\n4    Abby                  Yo-yos  Jigsaw puzzles         Yellow        3\n5  Abdiel Toy musical instruments     LEGO blocks          Brown        2\n  gift_complexity workshop_assignment\n1    Complex Gift   Learning Workshop\n2    Complex Gift    General Workshop\n3     Simple Gift    General Workshop\n4     Simple Gift    General Workshop\n5    Complex Gift   Learning Workshop\n\n\n0.058 sec elapsed"
  }
]